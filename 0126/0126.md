# æˆ‘é 
```objectivec
ç»ˆäºæ¥åˆ°æ¶å¿ƒçš„åŠ¨ç”»éƒ¨åˆ†ğŸ¤
```

# CALayer
* é€šè¿‡æ“ä½œCALayerå¯¹è±¡ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒæ•´UIViewçš„ä¸€äº›å¤–è§‚å±æ€§

> //è®¾ç½®é˜´å½±çš„é¢œè‰²
    self.imageV.layer.shadowColor = [UIColor blueColor].CGColor;
    //è®¾ç½®é˜´å½±çš„ä¸é€æ˜åº¦
    self.imageV.layer.shadowOpacity = 1;
    self.imageV.layer.shadowOffset = CGSizeMake(20, 20);
    //è®¾ç½®é˜´å½±çš„æ¨¡ç³Šçš„åŠå¾„
    self.imageV.layer.shadowRadius = 5;
>    //è¾¹æ¡†å®½åº¦,å¾€é‡Œè¾¹èµ°çš„.
    self.imageV.layer.borderWidth = 2;
    self.imageV.layer.borderColor = [UIColor greenColor].CGColor;
>    //è®¾ç½®åœ†è§’
    self.imageV.layer.cornerRadius = 50;
    //UIImageæ˜¯å­˜æ”¾åœ¨layerçš„contentsé‡Œé¢çš„,ä¸æ˜¯ç›´æ¥ä½œç”¨åœ¨layerçš„,æ“ä½œlayerå¹¶ä¸ä¼šå½±å“å®ƒ,maskå¤§å°å’Œæ ¹å±‚ä¸€æ ·,æ“ä½œmaskå¯ä»¥è£å‰ª
    //æŠŠè¶…è¿‡æ ¹å±‚ä»¥å¤–çš„ä¸œè¥¿éƒ½ç»™è£å‰ªæ‰(UIViewè‡ªå¸¦çš„å±‚,æˆ‘ä»¬ç§°å®ƒæ˜¯æ ¹å±‚)
    self.imageV.layer.masksToBounds = YES;
>    NSLog(@"%@",self.imageV.layer.contents);

## CATransform3D
* layçš„å½¢å˜å±æ€§ layer.transform(CATransform3D), å’Œview.transform(CGAffineTransform)ä¸åŒ

```objectivec
-(void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event {
    
    //3Dæ•ˆæœ
    [UIView animateWithDuration:0.5 animations:^{
        //x y z
//        self.imageV.layer.transform = CATransform3DMakeRotation(M_PI, 0.3, 1, 0);
        
        //æŠŠç»“æ„ä½“è½¬æˆå¯¹è±¡
//        NSValue *value = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI, 0.3, 1, 0)];
//        [self.imageV.layer setValue:value forKeyPath:@"transform"];
        
        //é€šè¿‡KVCç›´æ¥è®¾ç½®å½¢å˜,ä¸€èˆ¬æ˜¯åšå¿«é€Ÿæ—‹è½¬,å¹³ç§»,ç¼©æ”¾
        [self.imageV.layer setValue:@(100) forKeyPath:@"transform.translation.x"];
    }];
}
```

## CALayerç–‘æƒ‘
* é¦–å…ˆ,CALayeræ˜¯å®šä¹‰åœ¨QuartzCoreæ¡†æ¶ä¸­çš„
* CGImageRefã€CGColorRefä¸¤ç§æ•°æ®ç±»å‹æ˜¯å®šä¹‰åœ¨CoreGraphicsæ¡†æ¶ä¸­çš„
UIColorã€UIImageæ˜¯å®šä¹‰åœ¨UIKitæ¡†æ¶ä¸­çš„
* å…¶æ¬¡,QuartzCoreæ¡†æ¶å’ŒCoreGraphicsæ¡†æ¶æ˜¯å¯ä»¥è·¨å¹³å°ä½¿ç”¨çš„ï¼Œåœ¨iOSå’ŒMac OS Xä¸Šéƒ½èƒ½ä½¿ç”¨,ä½†æ˜¯UIKitåªèƒ½åœ¨iOSä¸­ä½¿ç”¨
* ä¸ºäº†ä¿è¯å¯ç§»æ¤æ€§ï¼ŒQuartzCoreä¸èƒ½ä½¿ç”¨UIImageã€UIColorï¼Œåªèƒ½ä½¿ç”¨CGImageRefã€CGColorRef

# Layerå’ŒUIViewçš„é€‰æ‹©
* åœ¨æœ‰äº›æƒ…å†µä¸‹,Layerå’ŒUIViewéƒ½èƒ½è¾¾åˆ°æ•ˆæœ

```objectivec
    CALayer *layer = [CALayer layer];
    layer.backgroundColor = [UIColor redColor].CGColor;
    layer.frame = CGRectMake(50, 50, 100, 100);
    [self.view.layer addSublayer:layer];
    layer.contents = (id)[UIImage imageNamed:@"é˜¿ç‹¸å¤´åƒ"].CGImage;
```

*     å…¶å®,å¯¹æ¯”CALayerï¼ŒUIViewå¤šäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†çš„åŠŸèƒ½.ä¹Ÿå°±æ˜¯è¯´,CALayerä¸èƒ½å¤„ç†ç”¨æˆ·çš„è§¦æ‘¸äº‹ä»¶,è€ŒUIViewå¯ä»¥,æ‰€ä»¥,å¦‚æœæ˜¾ç¤ºå‡ºæ¥çš„ä¸œè¥¿éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’çš„è¯ï¼Œç”¨UIViewï¼›å¦‚æœä¸éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œç”¨UIViewæˆ–è€…CALayeréƒ½å¯ä»¥,å½“ç„¶ï¼ŒCALayerçš„æ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œå› ä¸ºå®ƒå°‘äº†äº‹ä»¶å¤„ç†çš„åŠŸèƒ½ï¼Œæ›´åŠ è½»é‡çº§

# layerå±æ€§ : positionå’ŒanchorPoint
* position è®¾ç½®layeråœ¨çˆ¶å±‚ä¸­çš„ä½ç½®,ä»¥çˆ¶å±‚å·¦ä¸Šè§’ä¸º(0,0)ç‚¹;
* anchorPoint è®¾ç½®layerè‡ªèº«å“ªä¸ªç‚¹ä¼šå®šä½åˆ°positionæ‰€æŒ‡çš„ä½ç½®(0~1)é»˜è®¤(0.5,0.5);
* UIViewçš„centerå°±æ˜¯å®ƒlayerçš„position
* UIViewçš„frameå³æ˜¯anchorPointä¸º(0,0)çš„position


